/* @theme localhouse-blue */

@import url('https://cdn.jsdelivr.net/npm/line-seed-jp/line-seed-jp.css');

/* Color Variables */
:root {
  /* Main theme colors */
  --corporate-primary: #003366;      /* Deep trustworthy blue */
  --corporate-accent: #0055A4;       /* Brighter blue for accents */
  --corporate-secondary: #004488;    /* Medium blue */
  --corporate-light: #f8f9fa;        /* Light background */
  --corporate-text: #333;            /* Main text color */
  --corporate-muted: #555;           /* Muted text */
  --corporate-border: #eee;          /* Light borders */
  --corporate-code-bg: #f7f7f7;      /* Code background */
  --corporate-table-border: #ddd;    /* Table borders */
  --corporate-table-header: #f2f2f2; /* Table header background */
  --corporate-footer: #888;          /* Footer text */
  
  /* Mermaid specific colors */
  --mermaid-node-bg: var(--corporate-primary);
  --mermaid-node-border: var(--corporate-accent);
  --mermaid-node-text: #ffffff;
  --mermaid-edge-color: var(--corporate-accent);
  --mermaid-edge-label-bg: #ffffff;
  --mermaid-edge-label-text: var(--corporate-primary);
  --mermaid-cluster-bg: var(--corporate-light);
  --mermaid-cluster-border: var(--corporate-accent);
  --mermaid-cluster-text: var(--corporate-primary);
}

/* Base Typography and Layout */
section {
  background-color: #fff;
  color: var(--corporate-text);
  font-family: 'LINE Seed JP', 'Helvetica Neue', 'Arial', 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', 'BIZ UDPGothic', 'Meiryo', sans-serif;
  font-size: 22px;
  padding: 40px;
  line-height: 1.6;
}

/* Headings */
h1, h2, h3, h4, h5, h6 {
  font-weight: 700;
  color: var(--corporate-primary);
  margin-top: 0;
  margin-bottom: 0.5em;
}

h1 {
  font-size: 2.8em;
  border-bottom: 3px solid var(--corporate-accent);
  padding-bottom: 0.3em;
  margin-bottom: 0.8em;
}

h2 {
  position: absolute;
  top: 40px;
  left: 40px;
  right: 40px;
  font-size: 1.8em;
  color: var(--corporate-primary);
  border-bottom: 2px solid var(--corporate-accent);
  padding-bottom: 0.3em;
  margin: 0;
}

/* h2があるスライドの本文が重ならないように調整 */
section:has(h2) {
  padding-top: 120px;
}

h3 {
  font-size: 1.6em;
  color: var(--corporate-secondary);
}

/* Links */
a {
  color: var(--corporate-accent);
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

/* Lists */
p, ul, ol {
  margin-bottom: 1em;
}

ul {
  list-style-type: disc;
}

ol {
  list-style-type: decimal;
}

ul ul, ol ol, ul ol, ol ul {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

/* Blockquotes */
blockquote {
  border-left: 5px solid var(--corporate-border);
  padding: 0.5em 1em;
  margin: 1em 0;
  color: var(--corporate-muted);
}

/* Code */
pre, code {
  font-family: 'Menlo', 'Consolas', 'Monaco', monospace;
  background-color: var(--corporate-code-bg);
  border-radius: 4px;
}

pre {
  padding: 1em;
  overflow-x: auto;
}

code {
  padding: 0.2em 0.4em;
  font-size: 0.9em;
}

/* Tables */
table {
  border-collapse: collapse;
  width: 100%;
  margin: 1em 0;
}

th, td {
  border: 1px solid var(--corporate-table-border);
  padding: 0.8em;
  text-align: left;
}

th {
  background-color: var(--corporate-table-header);
  font-weight: bold;
  color: var(--corporate-primary);
}

/* Header and Footer */
header, footer {
  position: absolute;
  left: 40px;
  right: 40px;
  font-size: 0.75em;
  color: var(--corporate-footer);
}

header {
  top: 25px;
}

footer {
  bottom: 25px;
  border-top: 1px solid var(--corporate-border);
  padding-top: 10px;
  text-align: right;
}

/* Paginate */
section::after {
  content: attr(data-marp-pagination);
  position: absolute;
  bottom: 25px;
  left: 40px;
  font-size: 0.75em;
  color: var(--corporate-footer);
}

/* Mermaid diagram styling - Improved sizing and layout */
.mermaid {
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  width: 100% !important;
  max-width: 900px !important;
  margin: 30px auto !important;
  padding: 20px !important;
  box-sizing: border-box !important;
}

.mermaid svg {
  font-family: 'LINE Seed JP', 'Helvetica Neue', 'Arial', sans-serif !important;
  max-width: 100% !important;
  max-height: 500px !important;
  width: auto !important;
  height: auto !important;
  display: block !important;
  margin: 0 auto !important;
}

/* h2があるスライドでのMermaid調整 */
section:has(h2) .mermaid {
  margin-top: 40px !important;
  max-height: 400px !important;
}

/* レスポンシブ対応 */
@media (max-width: 1280px) {
  .mermaid {
    max-width: 80% !important;
    padding: 15px !important;
  }
  
  .mermaid svg {
    max-height: 400px !important;
  }
}

/* Node styling */
div#\:\$p svg .node rect,
div#\:\$p svg .node circle,
div#\:\$p svg .node ellipse,
div#\:\$p svg .node polygon,
section svg .node rect,
section svg .node circle,
section svg .node ellipse,
section svg .node polygon,
svg .node rect,
svg .node circle,
svg .node ellipse,
svg .node polygon {
  fill: var(--mermaid-node-bg) !important;
  stroke: var(--mermaid-node-border) !important;
  stroke-width: 2px !important;
  rx: 6px !important;
  ry: 6px !important;
  min-width: 60px !important;
  min-height: 30px !important;
}

/* Text styling */
div#\:\$p svg .nodeLabel,
div#\:\$p svg .node .label,
div#\:\$p svg text,
section svg .nodeLabel,
section svg .node .label,
section svg text,
svg .nodeLabel,
svg .node .label,
svg text {
  fill: var(--mermaid-node-text) !important;
  color: var(--mermaid-node-text) !important;
  font-family: 'LINE Seed JP', 'Helvetica Neue', 'Arial', sans-serif !important;
  font-size: 16px !important;
  font-weight: 600 !important;
  text-anchor: middle !important;
  dominant-baseline: central !important;
}

/* Foreign object styling for HTML labels */
div#\:\$p svg .node .label foreignObject div,
div#\:\$p svg .nodeLabel foreignObject div,
section svg .node .label foreignObject div,
section svg .nodeLabel foreignObject div,
svg .node .label foreignObject div,
svg .nodeLabel foreignObject div {
  color: var(--mermaid-node-text) !important;
  font-family: 'LINE Seed JP', 'Helvetica Neue', 'Arial', sans-serif !important;
  font-size: 14px !important;
  font-weight: 600 !important;
  text-align: center !important;
  padding: 4px 8px !important;
  display: block !important;
  height: auto !important;
  width: auto !important;
  box-sizing: border-box !important;
  line-height: 1.3 !important;
  white-space: normal !important;
  word-wrap: break-word !important;
}

/* Mermaid text styling - Fixed for proper text visibility */
div#\:\$p>svg>foreignObject>section .mermaid text,
div#\:\$p>svg>foreignObject>section .mermaid .nodeLabel,
div#\:\$p>svg>foreignObject>section .mermaid .label,
div#\:\$p>svg>foreignObject>section .mermaid tspan,
div#\:\$p>svg>foreignObject>section .mermaid .edgeLabel,
.mermaid text,
.mermaid .nodeLabel,
.mermaid .label,
.mermaid tspan,
.mermaid .edgeLabel {
  fill: #ffffff !important;
  color: #ffffff !important;
  font-family: 'LINE Seed JP', 'Helvetica Neue', 'Arial', sans-serif !important;
  font-size: 16px !important;
  font-weight: 600 !important;
  opacity: 1 !important;
  visibility: visible !important;
  stroke: none !important;
}

/* Override any default text colors */
div#\:\$p>svg>foreignObject>section .mermaid svg text[fill]:not([fill="#ffffff"]),
.mermaid svg text[fill]:not([fill="#ffffff"]) {
  fill: #ffffff !important;
}

/* Ensure node labels are visible */
div#\:\$p>svg>foreignObject>section .mermaid .node .label,
div#\:\$p>svg>foreignObject>section .mermaid .node text,
.mermaid .node .label,
.mermaid .node text {
  fill: #ffffff !important;
  color: #ffffff !important;
}

/* Edge and arrow styling */
div#\:\$p svg .edgePath .path,
section svg .edgePath .path,
svg .edgePath .path {
  stroke: var(--mermaid-edge-color) !important;
  stroke-width: 2px !important;
}

div#\:\$p svg .arrowheadPath,
section svg .arrowheadPath,
svg .arrowheadPath {
  fill: var(--mermaid-edge-color) !important;
  stroke: var(--mermaid-edge-color) !important;
}

/* Edge labels styling */
div#\:\$p svg .edgeLabel,
section svg .edgeLabel,
svg .edgeLabel {
  background-color: var(--mermaid-edge-label-bg) !important;
  color: var(--mermaid-edge-label-text) !important;
  font-family: 'LINE Seed JP', 'Helvetica Neue', 'Arial', sans-serif !important;
  font-size: 14px !important;
  padding: 4px 8px !important;
  border-radius: 4px !important;
}

/* Ensure all text elements are visible */
div#\:\$p svg tspan,
section svg tspan,
svg tspan {
  fill: var(--mermaid-node-text) !important;
  font-family: 'LINE Seed JP', 'Helvetica Neue', 'Arial', sans-serif !important;
}

/* Additional Mermaid diagram type support */
/* Sequence diagrams */
.mermaid .actor {
  fill: var(--mermaid-node-bg) !important;
  stroke: var(--mermaid-node-border) !important;
}

.mermaid .actor-text {
  fill: var(--mermaid-node-text) !important;
  font-size: 14px !important;
}

/* Class diagrams */
.mermaid .classBox {
  fill: var(--mermaid-node-bg) !important;
  stroke: var(--mermaid-node-border) !important;
}

.mermaid .classTitle {
  fill: var(--mermaid-node-text) !important;
  font-size: 16px !important;
  font-weight: bold !important;
}

/* State diagrams */
.mermaid .state {
  fill: var(--mermaid-node-bg) !important;
  stroke: var(--mermaid-node-border) !important;
}

.mermaid .state-title {
  fill: var(--mermaid-node-text) !important;
  font-size: 14px !important;
}

/* Night Owl Light syntax highlighting theme for code blocks */
pre code.hljs {
  display: block;
  overflow-x: auto;
  padding: 1em;
  color: #403f53;
  background: #fbfbfb;
}

.hljs-comment,
.hljs-quote {
  color: #989fb1;
  font-style: italic;
}

.hljs-doctag,
.hljs-keyword,
.hljs-formula {
  color: #994cc3;
}

.hljs-section,
.hljs-name,
.hljs-selector-tag,
.hljs-deletion,
.hljs-subst {
  color: #d73a49;
}

.hljs-literal {
  color: #36acaa;
}

.hljs-string,
.hljs-regexp,
.hljs-addition,
.hljs-attribute,
.hljs-meta-string {
  color: #4876d6;
}

.hljs-built_in,
.hljs-class .hljs-title {
  color: #0c969b;
}

.hljs-attr,
.hljs-variable,
.hljs-template-variable,
.hljs-type,
.hljs-selector-class,
.hljs-selector-attr,
.hljs-selector-pseudo,
.hljs-number {
  color: #aa0982;
}

.hljs-symbol,
.hljs-bullet,
.hljs-link,
.hljs-meta,
.hljs-selector-id,
.hljs-title {
  color: #4876d6;
}

.hljs-function {
  color: #4876d6;
}

.hljs-title.function_ {
  color: #4876d6;
}

.hljs-params {
  color: #7a3e9d;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}

.hljs-link {
  text-decoration: underline;
}
